{# Defaults #}
{% if not display_submit is defined %} {% set display_submit = false %} {% endif %}
{% if not ignore_fields is defined %} {% set ignore_fields = [] %} {% endif %}
{% if not token is defined %} {% set token = false %} {% endif %}
{% if not display_errors is defined %} {% set display_errors = false %} {% endif %}


{# Global #}
{% set type_in_form = [] %}


{% if not form is defined  %}
    {# Form isn't defined #}
    {{ render(controller('PwndUserBundle:Polymer:formNotExist')) }}
{% endif %}


{% if display_errors %}
    {{ form_errors(form) }}
{% endif %}


{% if token %}
    {{ form_widget(form._token) }}
{% endif %}


{% for input in form %}
        
    {% set input_name = input.vars.name %}
    {% set type = input.vars.block_prefixes[1] %}
    {% set type_in_form = type_in_form|merge(input.vars.block_prefixes) %}

    {% if input_name not in ignore_fields %}

        {# 
         #  Work for input type : 
         #        - text
         #        - password
         #        - search 
         #        - email
         #        - number
         #        - date
         #}
        {% if (type == "text") %}

            {% block text_widget %}
                <sf-polymer-input lol="" name="{{ form[input_name].vars.full_name }}" id="{{ form[input_name].vars.id }}" label="{{ form[input_name].vars.name }}" required="{{ form[input_name].vars.required }}">
                </sf-polymer-input>
                <input type="hidden" name="{{ form[input_name].vars.full_name }}">
            {% endblock %}

        {% elseif (type == "hidden") %}


        {% elseif (type == "checkbox") %}


        {% elseif (type == "select") %}


        {% elseif (type == "choice") %}


        {% elseif (type == "entity") %}


        {% else %}
            {# Unknown field type #}
            {{ render(controller('PwndUserBundle:Polymer:unknownFieldType', {'type' : type })) }} #}
        {% endif %}

    {% else %}
        {# Ignore field doesn't exist #}
        {{ render(controller('PwndUserBundle:Polymer:ignoreFieldNotExist', {'field' : input_name })) }}
    {% endif %}

{% endfor %}


{# Add submit button if not already defined #}
{% if ("submit" not in type_in_form) and (display_submit) %}
    {% block submit_widget %}
        <sf-polymer-input-submit
            value="Inscription">
        </sf-polymer-input-submit>
    {% endblock %}
{% endif %} 